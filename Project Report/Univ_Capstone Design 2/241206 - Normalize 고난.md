소프트맥스는 문제 없는데, 정규화에서 자꾸 오류가 났다. 그냥 적용이 안됨

계속 VR 환경에서 고군분투하다가 너무 답답해서 디버깅이 가능한 PC로 넘어갔다. 
PC 버전에 맞게 다시 Sentis 딥러닝을 돌릴 수 있는 코드를 작성하고, 화면에 Original 값과 Output 값을 동시에 출력하게 하였다.

왜 inputTensor가 정규화가 안되는가, 왜 디버깅하기 위한 출력도 안되는가 이유를 찾아보니, InputTensor를 사용하기 위해서는 (Read) Download를 해야한다는 어이없는 결과를 얻었다.

또 이것만이 문제가 아니었다. 촬영된 이미지 데이터에서 RGB 각 픽셀마다 정규화를 진행하며 255로 나누어주기도 했는데, 알고보니 이미지에서 TensorFloat 클래스로 변환되는 과정에서 이미 0에서1 사이의 값으로 매핑이 되고있었다. 따라서 255로 나누는 코드는 삭제하였다.

마지막으로, Output 결과를 적용할 때, 상하반전이 필요했었다.

이렇게 모든 과정을 마치고나서야 제대로 된 결과를 얻을 수 있었다.
![[NormalizeNonSoftmax00.png]]
(정규화 O, 소프트맥스 X)

![[NormalizeSoftmax00.png]]
정규화 O, 소프트맥스 O

![[NormalizeSoftmax01.png]]정규화 O 소프트맥스 O

메타퀘스트에 적용해보았다. 마찬가지로 Output Texture를 상하반전하고 출력한다. threshold는 0.5로 하였다.